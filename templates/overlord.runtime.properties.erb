# This file is managed by Puppet
# MODIFICATION WILL BE OVERWRITTEN

# Node Configs
<% if @host and @host != '' -%>
druid.host=<%= @host %>
<% end -%>
<% if @port and @port != '' -%>
druid.port=<%= @port %>
<% end -%>
<% if @service and @service != '' -%>
druid.service=<%= @service %>
<% end -%>

# Task Logging
druid.indexer.logs.type=<%= @logs_type ? @logs_type : 'file' %>
<% if @logs_type == 's3' -%>
    <%- if @s3_logs_bucket -%>
druid.indexer.logs.s3Bucket=<%= @s3_logs_bucket %>
    <%- end -%>
    <%- if @s3_logs_prefix -%>
druid.indexer.logs.s3Prefix=<%= @s3_logs_prefix %>
    <%- end -%>
<% elsif @logs_type == 'azure' -%>
    <%- if @azure_logs_container -%>
druid.indexer.logs.containe=<%= @azure_logs_container %>r
    <%- end -%>
    <%- if @azure_logs_prefix -%>
druid.indexer.logs.prefix=<%= @azure_logs_prefix %>
    <%- end -%>
<% elsif @logs_type == 'hdfs' -%>
    <%- if @hdfs_logs_directory -%>
druid.indexer.logs.directory=<%= @hdfs_logs_directory %>
    <%- end -%>
<% elsif @local_logs_directory and @local_logs_directory != '' -%>
druid.indexer.logs.directory=<%= @local_logs_directory %>
<% end -%>

# Overlord Service
<% if @runner_type and @runner_type != '' -%>
druid.indexer.runner.type=<%= @runner_type %>
<% end -%>
<% if @storage_type and @storage_type != '' -%>
druid.indexer.storage.type=<%= @storage_type %>
<% end -%>
<% if @storage_recently_finished_threshold and @storage_recently_finished_threshold != '' -%>
druid.indexer.storage.recentlyFinishedThreshold=<%= @storage_recently_finished_threshold %>
<% end -%>
<% if @queue_max_size and @queue_max_size != '' -%>
druid.indexer.queue.maxSize=<%= @queue_max_size %>
<% end -%>
<% if @queue_start_delay and @queue_start_delay != '' -%>
druid.indexer.queue.startDelay=<%= @queue_start_delay %>
<% end -%>
<% if @queue_restart_delay and @queue_restart_delay != '' -%>
druid.indexer.queue.restartDelay=<%= @queue_restart_delay %>
<% end -%>
<% if @queue_storage_sync_rate and @queue_storage_sync_rate != '' -%>
druid.indexer.queue.storageSyncRate=<%= @queue_storage_sync_rate %>
<% end -%>
<% if @runner_type == 'remote' -%>

# Remote Mode
    <%- if @runner_task_assignment_timeout and @runner_task_assignment_timeout != '' -%>
druid.indexer.runner.taskAssignmentTimeout=<%= @runner_task_assignment_timeout %>
    <%- end -%>
    <%- if @runner_min_worker_version and @runner_min_worker_version != '' -%>
druid.indexer.runner.minWorkerVersion=<%= @runner_min_worker_version %>
    <%- end -%>
    <%- if @runner_compress_znodes != '' -%>
druid.indexer.runner.compressZnodes=<%= @runner_compress_znodes %>
    <%- end -%>
    <%- if @runner_max_znode_bytes and @runner_max_znode_bytes != '' -%>
druid.indexer.runner.maxZnodeBytes=<%= @runner_max_znode_bytes %>
    <%- end -%>
    <%- if @runner_task_cleanup_timeout and @runner_task_cleanup_timeout != '' -%>
druid.indexer.runner.taskCleanupTimeout=<%= @runner_task_cleanup_timeout %>
    <%- end -%>
<% end -%>
<% if @autoscale == true -%>

# Autoscaling
druid.indexer.autoscale.doAutoscale=true
    <%- if @autoscale_strategy and @autoscale_strategy != '' -%>
druid.indexer.autoscale.strategy=<%= @autoscale_strategy %>
    <%- end -%>
    <%- if @autoscale_provision_period and @autoscale_provision_period != '' -%>
druid.indexer.autoscale.provisionPeriod=<%= @autoscale_provision_period %>
    <%- end -%>
    <%- if @autoscale_terminate_period and @autoscale_terminate_period != '' -%>
druid.indexer.autoscale.terminatePeriod=<%= @autoscale_terminate_period %>
    <%- end -%>
    <%- if @autoscale_origin_time and @autoscale_origin_time != '' -%>
druid.indexer.autoscale.originTime=<%= @autoscale_origin_time %>
    <%- end -%>
    <%- if @autoscale_worker_idle_timeout and @autoscale_worker_idle_timeout != '' -%>
druid.indexer.autoscale.workerIdleTimeout=<%= @autoscale_worker_idle_timeout %>
    <%- end -%>
    <%- if @autoscale_max_scaling_duration and @autoscale_max_scaling_duration != '' -%>
druid.indexer.autoscale.maxScalingDuration=<%= @autoscale_max_scaling_duration %>
    <%- end -%>
    <%- if @autoscale_num_events_to_track and @autoscale_num_events_to_track != '' -%>
druid.indexer.autoscale.numEventsToTrack=<%= @autoscale_num_events_to_track %>
    <%- end -%>
    <%- if @autoscale_pending_task_timeout and @autoscale_pending_task_timeout != '' -%>
druid.indexer.autoscale.pendingTaskTimeout=<%= @autoscale_pending_task_timeout %>
    <%- end -%>
    <%- if @autoscale_worker_version and @autoscale_worker_version != '' -%>
druid.indexer.autoscale.workerVersion=<%= @autoscale_worker_version %>
    <%- end -%>
    <%- if @autoscale_worker_port and @autoscale_worker_port != '' -%>
druid.indexer.autoscale.workerPort=<%= @autoscale_worker_port %>
    <%- end -%>
<% end -%>
